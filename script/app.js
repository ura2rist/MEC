"use strict";window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".request__form"),t=document.querySelector(".header__inner"),r=document.querySelector(".header__inner__two"),c=document.querySelector(".header__banner-menu"),n=document.querySelector(".mob-menu"),o=document.querySelector(".header__wrapper"),i=document.getElementById("header__prev-button");function l(e){"0px"===e.style.height?e.style.height="".concat(e.scrollHeight,"px"):(e.style.height="".concat(e.scrollHeight,"px"),window.getComputedStyle(e,null).getPropertyValue("height"),e.style.height="0"),e.addEventListener("transitionend",(function(){"0px"!==e.style.height&&(e.style.height="auto")}))}n.addEventListener("click",(function(e){(e.currentTarget.classList.toggle("mob-menu_active"),o.classList.toggle("header__wrapper_active"),document.querySelector("body").classList.toggle("lock-mob"),document.querySelector("header").classList.toggle("header_active"),document.querySelector(".header__inner_active"))&&(l(document.querySelector(".header__inner-list")),document.querySelector(".header__inner_active").classList.remove("header__inner_active"));document.querySelector(".header__inner__two_active")&&document.querySelector(".header__inner__two_active").classList.remove("header__inner__two_active"),document.querySelector(".lock")&&document.querySelector(".lock").classList.remove("lock")})),t.addEventListener("click",(function(e){var t=e.currentTarget.querySelector(".header__inner-list");document.addEventListener("click",(function(e){document.querySelector(".header_active")&&(e.composedPath().includes(document.querySelector(".header__wrapper"))||(l(t),document.querySelector("header").classList.toggle("header_active"),document.querySelector(".header__inner").classList.toggle("header__inner_active"),document.querySelector(".header__inner__two_active")&&(document.querySelector(".header__inner__two_active").classList.toggle("header__inner__two_active"),document.querySelector(".header__banner-menu_active").classList.toggle("header__banner-menu_active"))))})),e.currentTarget.classList.toggle("header__inner_active"),l(t),document.documentElement.clientWidth>1180&&(document.querySelector("body").classList.toggle("lock"),document.querySelector("header").classList.toggle("header_active"))})),i.addEventListener("click",(function(e){var t=e.currentTarget.closest(".header__inner-list");e.stopPropagation(),l(t),document.querySelector(".lock")&&document.querySelector(".lock").classList.remove("lock"),document.querySelector(".header__inner_active")&&document.querySelector(".header__inner_active").classList.remove("header__inner_active"),document.querySelector(".header__inner__two_active")&&document.querySelector(".header__inner__two_active").classList.remove("header__inner__two_active")})),r.addEventListener("click",(function(e){e.stopPropagation(),c.classList.toggle("header__banner-menu_active"),e.currentTarget.classList.toggle("header__inner__two_active")})),e.addEventListener("submit",(function(e){e.preventDefault();var t={company:e.currentTarget.company,fio:e.currentTarget.fio,email:e.currentTarget.email,phone:e.currentTarget.phone},r=e.currentTarget.policy;if(e.currentTarget.querySelector(".request__error-check")&&(console.log(e.currentTarget.querySelector(".request__error-check")),e.currentTarget.querySelector(".request__error-check").classList.remove("request__error-check")),e.currentTarget.querySelector(".request__error")&&e.currentTarget.querySelectorAll(".request__error").forEach((function(e){e.classList.remove("request__error")})),t.company.value.trim()&&t.fio.value.trim()&&t.email.value.trim()&&t.phone.value.trim()&&r.checked)alert("Форма заполнена");else for(var c in r.checked||r.nextElementSibling.querySelector(".request__error-span").classList.add("request__error-check"),t)t[c].value||t[c].closest(".request__form-input").classList.add("request__error")})),function(){var e=document.querySelectorAll(".select__header"),t=document.querySelectorAll(".select__item");function r(){this.parentElement.classList.toggle("select_active");var e=this.nextElementSibling;e.style.height?e.style.height="":e.style.height=e.scrollHeight+"px"}function c(){var e=this.innerText,t=this.closest(".select"),r=this.closest(".select").querySelector(".select__enter");this.closest(".select__body").style.height="",r.innerText=e,t.classList.remove("select_active")}e.forEach((function(e){e.addEventListener("click",r)})),t.forEach((function(e){e.addEventListener("click",c)}))}(),document.querySelectorAll(".footer__content-title").forEach((function(e){e.addEventListener("click",(function(e){if(document.documentElement.clientWidth<620){var t=e.currentTarget.nextElementSibling;e.currentTarget.classList.toggle("footer__content-title_active"),t.style.height?(t.style.height="",t.style.paddingBottom=""):(t.style.height=t.scrollHeight+"px",t.style.paddingBottom="20px")}}))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RGb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVySW5uZXIiLCJoZWFkZXJJbm5lclR3byIsImhlYWRlckJhbm5lckltZyIsIm1lbnVCdXR0b24iLCJoZWFkZXJNb2IiLCJwcmV2QnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJhdXRvSGVpZ2h0IiwiaGVpZ2h0QmxvY2siLCJzdHlsZSIsImhlaWdodCIsImNvbmNhdCIsInNjcm9sbEhlaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiY29tcG9zZWRQYXRoIiwiaW5jbHVkZXMiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImNsb3Nlc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1JbnB1dCIsImNvbXBhbnkiLCJmaW8iLCJlbWFpbCIsInBob25lIiwicG9saWN5IiwiY29uc29sZSIsImxvZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsInZhbHVlIiwidHJpbSIsImNoZWNrZWQiLCJhbGVydCIsImtleSIsIm5leHRFbGVtZW50U2libGluZyIsImFkZCIsInNlbGVjdEhlYWRlciIsInNlbGVjdEl0ZW0iLCJzZWxlY3RUb2dnbGUiLCJ0aGlzIiwicGFyZW50RWxlbWVudCIsImJsb2NrIiwic2VsZWN0Q2hvb3NlIiwidGV4dCIsImlubmVyVGV4dCIsInNlbGVjdCIsImN1cnJlbnRUZXh0IiwiZSIsInBhZGRpbmdCb3R0b20iXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFPQyxpQkFBaUIsb0JBQW9CLFdBQzFDLElBQU1DLEVBQWNDLFNBQVNDLGNBQWMsa0JBQ3JDQyxFQUFjRixTQUFTQyxjQUFjLGtCQUNy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QVVFLE9BQU8saUJBMUIxQjBCLEVBQWFULFNBQVEsU0FBQUMsR0FDbkJBLEVBQUt6QyxpQkFBaUIsUUFBU21ELE1BR2pDRCxFQUFXVixTQUFRLFNBQUFDLEdBQ2pCQSxFQUFLekMsaUJBQWlCLFFBQVN1RCxNQXlCbkNHLEdBRUF4RCxTQUFTcUMsaUJBQWlCLDBCQUEwQkMsU0FBUSxTQUFTQyxHQUNuRUEsRUFBS3pDLGlCQUFpQixTQUFTLFNBQUE0RCxHQUM3QixHQUFHMUQsU0FBU3dCLGdCQUFnQkMsWUFBYyxJQUFLLENBQzdDLElBQU0yQixFQUFRTSxFQUFFeEMsY0FBYzJCLG1CQUU5QmEsRUFBRXhDLGNBQWNDLFVBQVVDLE9BQU8sZ0NBRTdCZ0MsRUFBTXpDLE1BQU1DLFFBSWR3QyxFQUFNekMsTUFBTUMsT0FBUyxHQUNyQndDLEVBQU16QyxNQUFNZ0QsY0FBZ0IsS0FKNUJQLEVBQU16QyxNQUFNQyxPQUFTd0MsRUFBTXRDLGFBQWUsS0FDMUNzQyxFQUFNekMsTUFBTWdELGNBQWdCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gIGNvbnN0IHJlcXVlc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlcXVlc3RfX2Zvcm0nKTtcclxuICBjb25zdCBoZWFkZXJJbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2lubmVyJyk7XHJcbiAgY29uc3QgaGVhZGVySW5uZXJUd28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcl9fdHdvJyk7XHJcbiAgY29uc3QgaGVhZGVyQmFubmVySW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFubmVyLW1lbnUnKTtcclxuICBjb25zdCBtZW51QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYi1tZW51Jyk7XHJcbiAgY29uc3QgaGVhZGVyTW9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fd3JhcHBlcicpO1xyXG4gIGNvbnN0IHByZXZCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyX19wcmV2LWJ1dHRvbicpO1xyXG5cclxuICBmdW5jdGlvbiBhdXRvSGVpZ2h0KGhlaWdodEJsb2NrKSB7XHJcbiAgICBpZihoZWlnaHRCbG9jay5zdHlsZS5oZWlnaHQgPT09IFwiMHB4XCIpIHtcclxuICAgICAgaGVpZ2h0QmxvY2suc3R5bGUuaGVpZ2h0ID0gYCR7IGhlaWdodEJsb2NrLnNjcm9sbEhlaWdodCB9cHhgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoZWlnaHRCbG9jay5zdHlsZS5oZWlnaHQgPSBgJHsgaGVpZ2h0QmxvY2suc2Nyb2xsSGVpZ2h0IH1weGA7XHJcbiAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGhlaWdodEJsb2NrLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpO1xyXG4gICAgICBoZWlnaHRCbG9jay5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuICAgIH1cclxuXHJcbiAgICBoZWlnaHRCbG9jay5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChoZWlnaHRCbG9jay5zdHlsZS5oZWlnaHQgIT09IFwiMHB4XCIpIHtcclxuICAgICAgICBoZWlnaHRCbG9jay5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIlxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdtb2ItbWVudV9hY3RpdmUnKTtcclxuICAgIGhlYWRlck1vYi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX3dyYXBwZXJfYWN0aXZlJyk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnRvZ2dsZSgnbG9jay1tb2InKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9hY3RpdmUnKTtcclxuXHJcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcl9hY3RpdmUnKSkge1xyXG4gICAgICBjb25zdCBoZWlnaHRCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2lubmVyLWxpc3QnKTtcclxuXHJcbiAgICAgIGF1dG9IZWlnaHQoaGVpZ2h0QmxvY2spO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcl9hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2lubmVyX2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2lubmVyX190d29fYWN0aXZlJykpIHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faW5uZXJfX3R3b19hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2lubmVyX190d29fYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvY2snKSkge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9jaycpLmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaGVhZGVySW5uZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICBjb25zdCBoZWlnaHRCbG9jayA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faW5uZXItbGlzdCcpO1xyXG4gXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9hY3RpdmUnKSkge1xyXG4gICAgICAgIGNvbnN0IHdpdGhpbkJvdW5kYXJpZXMgPSBldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX193cmFwcGVyJykpO1xyXG4gIFxyXG4gICAgICAgIGlmKCF3aXRoaW5Cb3VuZGFyaWVzKSB7XHJcbiAgICAgICAgICBhdXRvSGVpZ2h0KGhlaWdodEJsb2NrKTtcclxuXHJcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfYWN0aXZlJyk7XHJcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcicpLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9faW5uZXJfYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faW5uZXJfX3R3b19hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcl9fdHdvX2FjdGl2ZScpLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9faW5uZXJfX3R3b19hY3RpdmUnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFubmVyLW1lbnVfYWN0aXZlJykuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19iYW5uZXItbWVudV9hY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9faW5uZXJfYWN0aXZlJyk7XHJcblxyXG4gICAgYXV0b0hlaWdodChoZWlnaHRCbG9jayk7XHJcblxyXG4gICAgaWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gMTE4MCkge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnRvZ2dsZSgnbG9jaycpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgY29uc3QgaGVpZ2h0QmxvY2sgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5oZWFkZXJfX2lubmVyLWxpc3QnKTtcclxuXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICBhdXRvSGVpZ2h0KGhlaWdodEJsb2NrKTtcclxuXHJcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9jaycpKSB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2NrJykuY2xhc3NMaXN0LnJlbW92ZSgnbG9jaycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2lubmVyX2FjdGl2ZScpKSB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2lubmVyX2FjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9faW5uZXJfYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faW5uZXJfX3R3b19hY3RpdmUnKSkge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19pbm5lcl9fdHdvX2FjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9faW5uZXJfX3R3b19hY3RpdmUnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaGVhZGVySW5uZXJUd28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICBoZWFkZXJCYW5uZXJJbWcuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19iYW5uZXItbWVudV9hY3RpdmUnKTtcclxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19pbm5lcl9fdHdvX2FjdGl2ZScpO1xyXG4gIH0pXHJcblxyXG4gIHJlcXVlc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgZm9ybUlucHV0ID0ge1xyXG4gICAgICBjb21wYW55OiBldmVudC5jdXJyZW50VGFyZ2V0LmNvbXBhbnksXHJcbiAgICAgIGZpbzogZXZlbnQuY3VycmVudFRhcmdldC5maW8sXHJcbiAgICAgIGVtYWlsOiBldmVudC5jdXJyZW50VGFyZ2V0LmVtYWlsLFxyXG4gICAgICBwaG9uZTogZXZlbnQuY3VycmVudFRhcmdldC5waG9uZSxcclxuICAgIH1cclxuICAgIGNvbnN0IHBvbGljeSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucG9saWN5O1xyXG5cclxuICAgIGlmKGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnJlcXVlc3RfX2Vycm9yLWNoZWNrJykpIHtcclxuICAgICAgY29uc29sZS5sb2coZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcucmVxdWVzdF9fZXJyb3ItY2hlY2snKSlcclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcucmVxdWVzdF9fZXJyb3ItY2hlY2snKS5jbGFzc0xpc3QucmVtb3ZlKCdyZXF1ZXN0X19lcnJvci1jaGVjaycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnJlcXVlc3RfX2Vycm9yJykpIHtcclxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcucmVxdWVzdF9fZXJyb3InKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgncmVxdWVzdF9fZXJyb3InKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZm9ybUlucHV0LmNvbXBhbnkudmFsdWUudHJpbSgpICYmIGZvcm1JbnB1dC5maW8udmFsdWUudHJpbSgpICYmIGZvcm1JbnB1dC5lbWFpbC52YWx1ZS50cmltKCkgJiYgZm9ybUlucHV0LnBob25lLnZhbHVlLnRyaW0oKSAmJiBwb2xpY3kuY2hlY2tlZCkge1xyXG4gICAgICBhbGVydCgn0KTQvtGA0LzQsCDQt9Cw0L/QvtC70L3QtdC90LAnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcG9saWN5LmNoZWNrZWQgfHwgcG9saWN5Lm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcucmVxdWVzdF9fZXJyb3Itc3BhbicpLmNsYXNzTGlzdC5hZGQoJ3JlcXVlc3RfX2Vycm9yLWNoZWNrJyk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IobGV0IGtleSBpbiBmb3JtSW5wdXQpIHtcclxuICAgICAgICBmb3JtSW5wdXRba2V5XS52YWx1ZSB8fCBmb3JtSW5wdXRba2V5XS5jbG9zZXN0KCcucmVxdWVzdF9fZm9ybS1pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ3JlcXVlc3RfX2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gc2VsZWN0KCkge1xyXG4gICAgY29uc3Qgc2VsZWN0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdF9faGVhZGVyJyk7XHJcbiAgICBjb25zdCBzZWxlY3RJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdF9faXRlbScpO1xyXG5cclxuICAgIHNlbGVjdEhlYWRlci5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0VG9nZ2xlKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBzZWxlY3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RDaG9vc2UpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlbGVjdFRvZ2dsZSgpIHtcclxuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdF9hY3RpdmUnKTtcclxuICAgICAgY29uc3QgYmxvY2sgPSB0aGlzLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgXHJcbiAgICAgIGlmKCFibG9jay5zdHlsZS5oZWlnaHQpIHtcclxuICAgICAgICBibG9jay5zdHlsZS5oZWlnaHQgPSBibG9jay5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJsb2NrLnN0eWxlLmhlaWdodCA9ICcnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlbGVjdENob29zZSgpIHtcclxuICAgICAgY29uc3QgdGV4dCA9IHRoaXMuaW5uZXJUZXh0O1xyXG4gICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLmNsb3Nlc3QoJy5zZWxlY3QnKTtcclxuICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLmNsb3Nlc3QoJy5zZWxlY3QnKS5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0X19lbnRlcicpO1xyXG5cclxuICAgICAgdGhpcy5jbG9zZXN0KCcuc2VsZWN0X19ib2R5Jykuc3R5bGUuaGVpZ2h0ID0gJyc7XHJcbiAgICAgIGN1cnJlbnRUZXh0LmlubmVyVGV4dCA9IHRleHQ7XHJcbiAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3QoKTtcclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvb3Rlcl9fY29udGVudC10aXRsZScpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPCA2MjApIHtcclxuICAgICAgICBjb25zdCBibG9jayA9IGUuY3VycmVudFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdmb290ZXJfX2NvbnRlbnQtdGl0bGVfYWN0aXZlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoIWJsb2NrLnN0eWxlLmhlaWdodCkge1xyXG4gICAgICAgICAgYmxvY2suc3R5bGUuaGVpZ2h0ID0gYmxvY2suc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgIGJsb2NrLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAnMjBweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJsb2NrLnN0eWxlLmhlaWdodCA9ICcnO1xyXG4gICAgICAgICAgYmxvY2suc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSlcclxufSk7Il19
